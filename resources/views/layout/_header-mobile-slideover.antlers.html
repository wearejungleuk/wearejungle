<!-- header-mobile-slideover Partial (clean version) -->
<div
        x-show="open"
        x-transition:enter="transition ease-out duration-500"
        x-transition:enter-start="translate-x-full"
        x-transition:enter-end="translate-x-0"
        x-transition:leave="transition ease-in duration-300"
        x-transition:leave-start="translate-x-0"
        x-transition:leave-end="translate-x-full"
        class="bg-brand-dark-blue text-white z-[99] fixed flex flex-col justify-center w-[200px] top-[75px] right-4 py-[30px] px-[30px] text-center"
        x-cloak
>
    <ul class="text-[16px]">
        {{ nav:main_menu select="id|title|url|children" }}
            <li
                    x-data="{ activeMenu: null }"
                    class="block mb-[13px]
                        {{ if children }}has-children{{ /if }}"
                    data-menu-id="{{ id }}"
            >
                <a
                        href="{{ url }}"
                        class="font-heading uppercase tracking-wide block relative"
                        x-init="$el.href && (href = new URL($el.href).hash)"
                        x-data="{ href: '' }"
                        @click.prevent="
        if (href.startsWith('#')) {
            open = false;
            activeMenu = null;
            setTimeout(() => {
                const el = document.querySelector(href);
                const header = document.querySelector('#header');
                const offset = header ? header.offsetHeight : 0;
                if (el) {
                    const top = el.getBoundingClientRect().top + window.pageYOffset - offset;
                    window.scrollTo({ top, behavior: 'smooth' });
                }
            }, 300);
        } else {
            {{ if children }}
                activeMenu = activeMenu === '{{ id }}' ? null : '{{ id }}';
            {{ else }}
                open = false;
            {{ /if }}
        }
    "
                        style="outline: none;"
                >
                    {{ title }}
                    {{ if children }}
                        <div class="absolute top-1/2 -translate-y-1/2 right-0">
                        {{ partial:components/icons.arrow-right-blue }}
                        </div>
                    {{ /if }}
                </a>

                {{ if children }}
                    <ul
                            x-show="activeMenu === '{{ id }}'"
                            x-transition:enter="transition ease-out duration-300 transform"
                            x-transition:enter-start="translate-x-full opacity-0"
                            x-transition:enter-end="translate-x-0 opacity-100"
                            x-transition:leave="transition ease-in duration-200 transform"
                            x-transition:leave-start="translate-x-0 opacity-100"
                            x-transition:leave-end="translate-x-full opacity-0"
                            class="absolute top-0 h-full pt-[150px] left-0 w-[100vw] bg-white text-black py-[8px] text-center transition-all transform z-10"
                            x-cloak
                    >
                        <li class="mb-[39px]">

                            <button
                                    @click="activeMenu = null"
                                    class="text-[20px] gap-4 uppercase tracking-wide relative flex items-center justify-center w-full border-b pb-[15px]"
                            >
                                {{ partial:components/icons.arrow-left-blue }}
                                <span>{{ title }}</span>
                            </button>
                        </li>

                        {{ children }}
                        <li class="block mb-[13px] last:mb-0">
                            <a
                                    href="{{ url }}"
                                    class="font-heading uppercase tracking-wide text-[20px]"
                                    style="outline: none;"
                                    @click="open = false"
                            >
                                {{ title }}
                            </a>
                        </li>
                        {{ /children }}
                    </ul>
                {{ /if }}
            </li>
        {{ /nav:main_menu }}
    </ul>
</div>
